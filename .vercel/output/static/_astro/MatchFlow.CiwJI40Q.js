import{j as e,Q as R,d as L,a as P}from"./Questionnaire.CAD3rL2O.js";import{r as g}from"./index.CVf8TyFT.js";function F({onMatch:i}){const[h,c]=g.useState(""),m=t=>{const a=t.match(/[?&]host=([a-zA-Z0-9\-_]+)/);if(a&&a[1])return a[1];const l=t.split(/[\s\n\r]+/).filter(r=>/^[a-zA-Z0-9\-_]{10,}$/.test(r));if(l.length>0){const r=l.filter(p=>!p.startsWith("http"));return r.length>0?r[r.length-1]:l[l.length-1]}return t.trim()},o=t=>{t.preventDefault();const a=h.trim();if(a){const d=m(a);i(d)}},n=t=>{t.preventDefault();const a=t.clipboardData.getData("text");c(a);const d=m(a);d!==a&&d.length>0?c(d):c(a)};return e.jsxs("div",{className:"max-w-md mx-auto p-8 bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"è¾“å…¥å¯¹æ–¹çš„ Match Score"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ç²˜è´´é‚€è¯·å‡½ã€é“¾æ¥æˆ–ç›´æ¥è¾“å…¥ Hash ç¼–ç "})]}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hash-input",className:"sr-only",children:"Match Score"}),e.jsx("textarea",{id:"hash-input",value:h,onChange:t=>c(t.target.value),onPaste:n,placeholder:"åœ¨æ­¤ç²˜è´´...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent transition-all min-h-[120px] text-sm font-mono resize-none",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-black text-white font-bold rounded-xl hover:bg-gray-800 transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"å¼€å§‹åŒ¹é…åˆ†æ"})]})]})}function Q({result:i,hostName:h,guestName:c,hostHash:m,guestHash:o}){const n=i.details,t=h||"A",a=c||"B",[d,l]=g.useState(!1),[r,p]=g.useState(!1);console.log("Analysis Report Raw Text:",n);const b=(s,u,x)=>{const f="(?:^|\\n)[#*\\s]*\\d*[\\.\\ã€]?\\s*"+u+".*?(?:\\n|$)",w=new RegExp(f,"i"),j=s.match(w);if(!j)return null;const $=j.index+j[0].length;let C=s.length;if(x){const M=s.slice($),W="(?:^|\\n)[#*\\s]*\\d*[\\.\\ã€]?\\s*"+x,H=new RegExp(W,"i"),E=M.match(H);E&&(C=$+E.index)}return s.slice($,C).trim().replace(/^[-â€”]+/,"").replace(/[-â€”]+$/,"").trim()},v=b(n,"æ ¸å¿ƒç»“è®º","å…³é”®ä¼˜åŠ¿")||"æš‚æ— ç»“è®º",N=b(n,"å…³é”®ä¼˜åŠ¿","æ½œåœ¨é›·åŒº"),S=b(n,"æ½œåœ¨é›·åŒº","é•¿æœŸç›¸å¤„"),T=b(n,"é•¿æœŸç›¸å¤„"),A=s=>s.split(/(\*\*.*?\*\*)/g).map((x,f)=>{if(x.startsWith("**")&&x.endsWith("**"))return e.jsx("strong",{className:"font-bold text-gray-900",children:x.slice(2,-2)},`bold-${f}`);if(!x)return null;const w=y=>y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),j=`(${w(t)}|${w(a)})`,$=new RegExp(j,"g"),C=x.split($);return e.jsx("span",{children:C.map((y,M)=>y===t?e.jsx("span",{className:"inline-block px-1.5 rounded bg-indigo-50 text-indigo-800 font-semibold border border-indigo-100 mx-0.5 transform hover:scale-105 transition-transform cursor-default",children:y},`nameA-${M}`):y===a?e.jsx("span",{className:"inline-block px-1.5 rounded bg-rose-50 text-rose-800 font-semibold border border-rose-100 mx-0.5 transform hover:scale-105 transition-transform cursor-default",children:y},`nameB-${M}`):y)},`text-${f}`)}),k=s=>s?e.jsx("ul",{className:"space-y-3",children:s.split(`
`).map((u,x)=>{const f=u.trim();if(!f||f.startsWith("---"))return null;const w=f.replace(/^[*â€¢-]\s*/,"").replace(/^\d+[\.\ã€]\s*/,"");return e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-current opacity-60"}),e.jsx("span",{className:"text-sm leading-relaxed",children:A(w)})]},x)})}):e.jsx("p",{className:"text-gray-500 italic",children:"æš‚æ— æ˜¾è‘—æ•°æ®"}),I=()=>{if(m&&o){const s=`${window.location.origin}/match?host=${m}&guest=${o}`;navigator.clipboard.writeText(s).then(()=>{l(!0),setTimeout(()=>l(!1),2e3)})}},B=()=>{if(o){const s=`ã€Match Score é‚€è¯·å‡½ã€‘
æœ‹å‹ï¼Œæˆ‘å·²å®Œæˆæˆ‘çš„çµé­‚å¥‘åˆåº¦æµ‹è¯•ã€‚ç‚¹å‡»ä¸‹æ–¹é“¾æ¥ï¼Œå®Œæˆä½ çš„é—®å·ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„ç›¸æ€§å¦‚ä½•ï¼š

${window.location.origin}/match?host=${o}

æˆ–ç›´æ¥å¤åˆ¶æˆ‘çš„ Match Score ç¼–ç ï¼š
${o}`;navigator.clipboard.writeText(s).then(()=>{p(!0),setTimeout(()=>p(!1),2e3)})}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 sm:p-10 bg-white border border-gray-200 rounded-2xl shadow-xl",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-black text-white mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}),e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:[t," & ",a," çš„çµé­‚å…±é¸£åˆ†æ"]}),e.jsx("p",{className:"text-gray-500 font-mono text-sm tracking-wider uppercase",children:"AI é©±åŠ¨çš„æ·±åº¦å¥‘åˆåº¦æŠ¥å‘Š"})]}),e.jsx("div",{className:"flex justify-center mb-12",children:e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#f3f4f6",strokeWidth:"12",fill:"transparent"}),e.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:440,strokeDashoffset:440-440*i.compatibilityScore/100,className:"text-black transition-all duration-1000 ease-out",strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-black tracking-tighter",children:[i.compatibilityScore,"%"]}),e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1",children:"å¥‘åˆåº¦"})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-900 text-white p-8 rounded-xl shadow-lg transform hover:scale-[1.01] transition-transform",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ğŸ’¡"})," æ ¸å¿ƒç»“è®º"]}),e.jsx("p",{className:"text-lg leading-relaxed font-medium opacity-90",children:A(v)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-xl border border-green-100",children:[e.jsxs("h3",{className:"text-green-800 font-bold mb-4 flex items-center",children:[e.jsx("span",{className:"bg-green-200 text-green-800 p-1 rounded mr-2 text-xs",children:"å¥‘åˆç‚¹"}),"å…³é”®ä¼˜åŠ¿"]}),e.jsx("div",{className:"text-green-900",children:k(N)})]}),e.jsxs("div",{className:"bg-red-50 p-6 rounded-xl border border-red-100",children:[e.jsxs("h3",{className:"text-red-800 font-bold mb-4 flex items-center",children:[e.jsx("span",{className:"bg-red-200 text-red-800 p-1 rounded mr-2 text-xs",children:"å†²çªç‚¹"}),"æ½œåœ¨é›·åŒº"]}),e.jsx("div",{className:"text-red-900",children:k(S)})]})]}),e.jsxs("div",{className:"bg-blue-50 p-8 rounded-xl border border-blue-100",children:[e.jsx("h3",{className:"text-blue-900 font-bold mb-4",children:"ğŸ”® é•¿æœŸç›¸å¤„å»ºè®®"}),e.jsx("div",{className:"text-blue-800 leading-relaxed",children:k(T)})]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200 text-center",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"åˆ†äº«è¿™ä»½æŠ¥å‘Š"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"ç”ŸæˆåŒ…å«åŒæ–¹æ•°æ®çš„æ°¸ä¹…é“¾æ¥"}),e.jsx("button",{onClick:I,className:"w-full py-3 bg-black text-white rounded-lg font-bold hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"å·²å¤åˆ¶é“¾æ¥"]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),"å¤åˆ¶æŠ¥å‘Šé“¾æ¥"]})})]}),e.jsxs("div",{className:"bg-indigo-50 p-6 rounded-xl border border-indigo-100 text-center",children:[e.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"æˆ‘ä¹Ÿè¦å‘èµ·æµ‹è¯•"}),e.jsx("p",{className:"text-sm text-indigo-600 mb-4",children:"è·å–ä½ çš„ä¸“å±é‚€è¯·å‡½ï¼Œå¯»æ‰¾å…¶ä»–å…±é¸£"}),e.jsx("button",{onClick:B,className:"w-full py-3 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"å·²å¤åˆ¶é‚€è¯·å‡½"]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"å¤åˆ¶æˆ‘çš„é‚€è¯·å‡½"]})})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"text-gray-400 hover:text-gray-600 font-medium text-sm transition-colors",children:"è¿”å›é¦–é¡µ"})})]})}const D=(i,h)=>{let c=0;const m=R.length;for(let t=0;t<m;t++){const a=i.answers[t],d=h.answers[t];c+=Math.abs(a-d)}const o=m*4;return Math.round((1-c/o)*100)},z=(i,h)=>{const c=D(i,h),m=R.map((o,n)=>{const t=i.answers[n],a=h.answers[n],d=o.options.find(r=>r.value===t),l=o.options.find(r=>r.value===a);return{id:o.id,dimension:o.dimension,question:o.text,A_answer:t,B_answer:a,A_label:d?.label||"N/A",B_label:l?.label||"N/A",difference:Math.abs(t-a)}});return{hostProfile:i,guestProfile:h,matchScore:c,comparisonMatrix:m}},O=i=>{const{matchScore:h,comparisonMatrix:c,hostProfile:m,guestProfile:o}=i,n=m.name||"A",t=o.name||"B",a=c.filter(r=>r.difference<=1),d=c.filter(r=>r.difference>=3);let l=`ä½ æ˜¯ä¸€ä½é˜…äººæ— æ•°çš„â€œèµ„æ·±æƒ…æ„Ÿè§‚å¯Ÿå‘˜â€ï¼Œæ“…é•¿ç”¨æœ€ç›´ç™½ã€æ¥åœ°æ°”çš„å¤§ç™½è¯åˆ†æäººé™…å…³ç³»ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ® ${n} å’Œ ${t} ä¸¤ä¸ªäººçš„50ä¸ªç»´åº¦é—®å·ç»“æœï¼Œç”Ÿæˆä¸€ä»½â€œä¸€é’ˆè§è¡€â€ä½†åˆå……æ»¡æ¸©åº¦çš„ç›¸æ€§åˆ†ææŠ¥å‘Šã€‚ä¸¤äººåŸºç¡€åŒ¹é…åº¦ä¸º ${h}%ã€‚è¯·ä»ä¸‰ä¸ªç»´åº¦ï¼ˆä¼˜åŠ¿ã€é›·åŒºã€é•¿æœŸå»ºè®®ï¼‰åˆ†æï¼Œå¹¶ä½¿ç”¨ä¸­æ–‡åˆ†ç‚¹ä½œç­”ã€‚

è¯·æ³¨æ„ï¼š
1. **è¯´äººè¯**ï¼šä¸è¦ç”¨å¿ƒç†å­¦æœ¯è¯­ï¼Œè¦åƒè€æœ‹å‹èŠå¤©ä¸€æ ·è‡ªç„¶ã€‚
2. **ç›´å‡»ç—›ç‚¹**ï¼šä¸è¦æ¨¡æ£±ä¸¤å¯ï¼Œå¥½çš„åçš„éƒ½è¦ç›´æ¥æŒ‡å‡ºæ¥ã€‚
3. **ç»“æ„æ¸…æ™°**ï¼šä¸¥æ ¼æŒ‰ç…§ä¸‹æ–¹çš„æ ¼å¼è¾“å‡ºã€‚
4. **ä»£å…¥åå­—**ï¼šåœ¨åˆ†æä¸­è‡ªç„¶åœ°æåˆ° ${n} å’Œ ${t} çš„åå­—ï¼Œä¸è¦åªè¯´â€œAâ€å’Œâ€œBâ€ã€‚`;return l+=`

--- ä¼˜åŠ¿ç»´åº¦ï¼ˆDifference <= 1ï¼‰ï¼šä¸¤äººå¤©ç„¶å¥‘åˆç‚¹ ---`,a.slice(0,5).forEach(r=>{l+=`
- [${r.dimension}]: Q.${r.id} (${r.question}) ä¸¤äººç­”æ¡ˆå‡ ä¹ä¸€è‡´ï¼Œ${n}: ${r.A_label}, ${t}: ${r.B_label}ã€‚`}),l+=`

--- æ ¸å¿ƒé›·åŒºï¼ˆDifference >= 3ï¼‰ï¼šæœªæ¥æ½œåœ¨çš„å†²çªçˆ†å‘ç‚¹ ---`,d.slice(0,5).forEach(r=>{l+=`
- [${r.dimension}]: Q.${r.id} (${r.question}) å·®å¼‚å·¨å¤§ (${n}:${r.A_label} vs ${t}:${r.B_label})ã€‚è¿™æ˜¯ç¡¬æ€§çŸ›ç›¾ï¼Œéœ€è¦æ·±å…¥å…³æ³¨ã€‚`}),l+=`

--- ç»´åº¦æ€»ç»“ ---`,l+=`

è¯·æ ¹æ®ä¸Šè¿°æ•°æ®å’Œé£æ ¼è¦æ±‚ï¼Œç”ŸæˆæŠ¥å‘Šçš„æœ€ç»ˆå†…å®¹ï¼ŒæŠ¥å‘Šåº”åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š
`,l+=`1. æ ¸å¿ƒç»“è®ºï¼ˆä¸€å¥è¯æ€»ç»“ï¼Œç›´æŒ‡æœ¬è´¨ï¼Œä¸è¦åºŸè¯ï¼‰
`,l+=`2. å…³é”®ä¼˜åŠ¿åˆ†æï¼ˆåˆ—ç‚¹é˜è¿°ï¼Œè¯´æ˜è¿™äº›é»˜å¥‘åœ¨ç”Ÿæ´»ä¸­æ„å‘³ç€ä»€ä¹ˆï¼‰
`,l+=`3. æ½œåœ¨é›·åŒºé¢„è­¦ï¼ˆåˆ—ç‚¹é˜è¿°ï¼Œç›´æ¥æŒ‡å‡ºå¦‚æœä¸æ³¨æ„ä¼šåµä»€ä¹ˆæ¶ï¼‰
`,l+=`4. é•¿æœŸç›¸å¤„å»ºè®®ï¼ˆç»™å‡ºé©¬ä¸Šèƒ½ç”¨çš„å®æ“å»ºè®®ï¼‰
`,l},_=async(i,h,c=3,m=1e3,o)=>{try{const n=await fetch(i,h);if(n.ok)return n;if([429,500,502,503,504].includes(n.status)&&c>0){const t=4-c;return console.warn(`Request failed with status ${n.status}. Retrying in ${m}ms... (Attempt ${t})`),o&&o(t),await new Promise(a=>setTimeout(a,m)),_(i,h,c-1,m*2,o)}return n}catch(n){if(c>0){const t=4-c;return console.warn(`Request failed with error. Retrying in ${m}ms... (Attempt ${t})`,n),o&&o(t),await new Promise(a=>setTimeout(a,m)),_(i,h,c-1,m*2,o)}throw n}},K=async(i,h,c,m,o)=>{const n=z(i,h),t=O(n),a="/api/analyze";try{const d=await _(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t,stream:!0,config:o})},3,1e3,c);if(!d.ok){const b=await d.text().catch(()=>"Unknown error");throw new Error(`AI Analysis request failed: ${d.status} ${d.statusText} - ${b}`)}const l=d.body?.getReader(),r=new TextDecoder;let p="";if(l)for(;;){const{done:b,value:v}=await l.read();if(b)break;const N=r.decode(v,{stream:!0});p+=N,m&&m(p)}else p=(await d.json()).reportText;return{compatibilityScore:n.matchScore,summary:`åŸºäºæ•°æ®çš„çµé­‚å¥‘åˆåº¦ï¼š${n.matchScore}%`,details:p}}catch(d){return console.error("AI Analysis Error:",d),{compatibilityScore:n.matchScore,summary:`åŸºäºæ•°æ®çš„çµé­‚å¥‘åˆåº¦ï¼š${n.matchScore}% (ç¦»çº¿æ¨¡å¼)`,details:`[ç³»ç»Ÿæç¤ºï¼šAI æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œä»¥ä¸‹æ˜¯åŸºäºåŸå§‹æ•°æ®çš„åˆ†æé¢„è§ˆ]

${t}`}}};function J(){const[i,h]=g.useState(null),[c,m]=g.useState(null),[o,n]=g.useState(null),[t,a]=g.useState(!1),[d,l]=g.useState(null),[r,p]=g.useState({endpoint:"",apiKey:"",model:""}),[b,v]=g.useState(!1),[N,S]=g.useState(0),T=s=>{h(s)};g.useEffect(()=>{const s=localStorage.getItem("soul_match_ai_config");if(s)try{p(JSON.parse(s))}catch(u){console.error("Failed to parse saved config",u)}},[]);const A=s=>{p(s),localStorage.setItem("soul_match_ai_config",JSON.stringify(s)),v(!1)},k=async(s,u)=>{a(!0),l(null),S(0);try{const x=L(s),f=L(u);if(x&&f){const w=await K(x,f,j=>S(j),j=>{n({compatibilityScore:D(x,f),summary:"æ­£åœ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...",details:j})},r);n(w)}else l("è§£æçµé­‚æ¡£æ¡ˆå¤±è´¥ï¼Œè¯·é‡è¯•ã€‚")}catch(x){console.error(x),l("åˆ†æè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚")}finally{a(!1),S(0)}};g.useEffect(()=>{const s=new URLSearchParams(window.location.search),u=s.get("host"),x=s.get("guest");u&&h(u),u&&x&&(m(x),k(u,x))},[r]);const I=async s=>{m(s),i&&k(i,s)};if(o){const s=i?L(i):null,u=c?L(c):null;return e.jsx(Q,{result:o,hostName:s?.name,guestName:u?.name,hostHash:i||void 0,guestHash:c||void 0})}const B=()=>{const[s,u]=g.useState(r);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"AI æ¨¡å‹è®¾ç½®"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"è‡ªå®šä¹‰ Endpoint (å¯é€‰)"}),e.jsx("input",{type:"text",value:s.endpoint||"",onChange:x=>u({...s,endpoint:x.target.value}),placeholder:"https://api.openai.com/v1/chat/completions",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤æœåŠ¡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key (å¯é€‰)"}),e.jsx("input",{type:"password",value:s.apiKey||"",onChange:x=>u({...s,apiKey:x.target.value}),placeholder:"sk-...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æ¨¡å‹åç§° (å¯é€‰)"}),e.jsx("input",{type:"text",value:s.model||"",onChange:x=>u({...s,model:x.target.value}),placeholder:"gemini-2.5-flash-lite",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:()=>A(s),className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"ä¿å­˜"})]})]})})};return t?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-black mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"æ­£åœ¨è¿›è¡Œçµé­‚å…±é¸£åˆ†æ..."}),e.jsx("p",{className:"text-gray-500 mt-2",children:"AI æ­£åœ¨å¯¹æ¯”ä½ ä»¬çš„ 50 ä¸ªç»´åº¦æ•°æ®"}),N>0&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 text-yellow-800 rounded-lg text-sm animate-pulse border border-yellow-200",children:["AI æœåŠ¡è¿æ¥ä¸ç¨³å®šï¼Œæ­£åœ¨è¿›è¡Œç¬¬ ",N," æ¬¡é‡è¯•..."]})]}):d?e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-red-50 border border-red-200 rounded-lg text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"å‡ºé”™äº†"}),e.jsx("p",{className:"text-red-600 mb-4",children:d}),e.jsx("button",{onClick:()=>window.location.href="/match",className:"px-4 py-2 bg-white border border-red-300 text-red-700 rounded hover:bg-red-50 transition-colors",children:"è¿”å›é‡è¯•"})]}):e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>v(!0),className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"AI è®¾ç½®",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),b&&e.jsx(B,{}),i?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center bg-gray-50 p-6 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-black text-white rounded-full text-xs font-mono mb-3",children:"åŒ¹é…æ¨¡å¼"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"å¯¹æ–¹å·²å°±ä½ï¼Œè¯·å®Œæˆä½ çš„çµé­‚æ¡£æ¡ˆ"}),e.jsxs("p",{className:"text-gray-500 text-sm font-mono",children:["ç›®æ ‡ç¼–ç : ",i.substring(0,12),"..."]})]}),e.jsx(P,{onComplete:I})]}):e.jsx(F,{onMatch:T})]})}export{J as default};
