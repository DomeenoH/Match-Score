import{j as e,e as u,Q as h}from"./codec.BvyRAB0w.js";import{r}from"./index.CVf8TyFT.js";import{A as p,f as y}from"./AnalysisReport.DiI71HLu.js";function N(){const[x,n]=r.useState(!1),[a,t]=r.useState(null),[i,l]=r.useState(0),[c,d]=r.useState(null),m=()=>({version:1,answers:h.map(()=>Math.floor(Math.random()*5)+1),timestamp:Date.now()}),b=async()=>{n(!0),d(null),t(null),l(0);try{const s=m(),o=m();console.log("Profile A:",s),console.log("Profile B:",o),console.log("Hash A:",u(s)),console.log("Hash B:",u(o));const g=await y(s,o,f=>l(f));t(g)}catch(s){console.error("Debug Analysis Failed:",s),s instanceof Error&&(console.error("Error Details:",s.message),console.error("Stack Trace:",s.stack)),d(s instanceof Error?s.message:"Unknown error")}finally{n(!1),l(0)}};return a?e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>t(null),className:"mb-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"← 返回 Debug"}),e.jsx(p,{result:a,hostInfo:"Debug-A",guestInfo:"Debug-B"})]}):x?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-black mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"正在进行灵魂共鸣分析..."}),e.jsx("p",{className:"text-gray-500 mt-2",children:"AI 正在对比你们的 50 个维度数据"}),i>0&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 text-yellow-800 rounded-lg text-sm animate-pulse border border-yellow-200",children:["AI 服务连接不稳定，正在进行第 ",i," 次重试..."]})]}):e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white border border-gray-200 rounded-lg shadow-sm text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Debug AI Analysis"}),e.jsxs("div",{className:"mb-6 text-left text-sm text-gray-600 bg-gray-50 p-4 rounded",children:[e.jsx("p",{children:"点击下方按钮将："}),e.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[e.jsx("li",{children:"生成两个随机 SoulProfile (50题)"}),e.jsx("li",{children:"计算本地匹配度"}),e.jsx("li",{children:"调用 AI 分析接口"}),e.jsx("li",{children:"展示最终报告"})]})]}),c&&e.jsxs("div",{className:"mb-6 p-3 bg-red-50 text-red-700 rounded text-sm text-left break-words",children:["Error: ",c]}),e.jsx("button",{onClick:b,className:"w-full px-6 py-3 bg-black text-white font-bold rounded-lg hover:bg-gray-800 transition-all",children:"开始 Debug"})]})}export{N as default};
