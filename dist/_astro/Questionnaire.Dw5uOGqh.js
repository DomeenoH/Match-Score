import{Q as a,j as e,D as u,e as S}from"./codec.BvyRAB0w.js";import{r as i}from"./index.CVf8TyFT.js";const f=["lifestyle","finance","communication","values"];function E({onComplete:p}){const[n,y]=i.useState(new Array(a.length).fill(0)),[l,x]=i.useState(0),[c,m]=i.useState(null),d=f[l],g=i.useMemo(()=>a.filter(r=>r.dimension===d),[d]),w=(r,t)=>{const s=a.findIndex(I=>I.id===r);if(s===-1)return;const o=[...n];o[s]=t,y(o),c&&m(null)},h=()=>{const r=g.filter(t=>{const s=a.findIndex(o=>o.id===t.id);return n[s]===0});return r.length>0?(m(`本页还有 ${r.length} 道题未完成，请回答所有问题后再继续。`),!1):!0},v=()=>{h()&&(x(r=>r+1),window.scrollTo(0,0))},N=()=>{x(r=>r-1),window.scrollTo(0,0)},j=()=>{if(h()){const t=S({version:1,answers:n});p(t)}},b=Math.round(n.filter(r=>r!==0).length/a.length*100);return e.jsxs("div",{className:"max-w-3xl mx-auto p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"sticky top-0 z-20 bg-white shadow-sm border-b border-gray-100 pb-4 mb-6 -mx-6 px-6 pt-4 rounded-t-lg",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"灵魂契合度测试"}),e.jsxs("span",{className:"text-sm font-mono text-gray-500",children:[b,"% 完成"]})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2",children:e.jsx("div",{className:"bg-black h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${b}%`}})})]}),e.jsxs("div",{className:"mb-8 bg-gray-50 p-6 rounded-xl border border-gray-100",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:u[d].title}),e.jsx("p",{className:"text-gray-600",children:u[d].description})]}),e.jsx("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-4 duration-500 ease-out",children:g.map(r=>{const t=a.findIndex(s=>s.id===r.id);return e.jsxs("div",{className:"border-b border-gray-50 pb-8 last:border-0 last:pb-0",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 leading-relaxed",children:[e.jsxs("span",{className:"text-gray-300 font-mono mr-3 text-sm",children:["#",r.id]}),r.text]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3",children:r.options.map(s=>e.jsxs("label",{className:`
                                            relative flex flex-col items-center justify-center p-4 rounded-xl border cursor-pointer transition-all duration-200 text-center h-full
                                            ${n[t]===s.value?"bg-black text-white border-black shadow-lg transform scale-[1.02]":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50 hover:border-gray-300"}
                                        `,children:[e.jsx("input",{type:"radio",name:`question-${r.id}`,value:s.value,checked:n[t]===s.value,onChange:()=>w(r.id,s.value),className:"hidden"}),e.jsx("span",{className:"text-sm font-medium",children:s.label})]},s.value))})]},r.id)})},l),c&&e.jsxs("div",{className:"mt-8 p-4 bg-red-50 text-red-700 rounded-lg text-center font-medium border border-red-100 animate-pulse",children:["⚠️ ",c]}),e.jsxs("div",{className:"mt-12 flex justify-between gap-4 pt-6 border-t border-gray-100",children:[e.jsx("button",{onClick:N,disabled:l===0,className:`
                        px-8 py-3 rounded-lg font-medium transition-colors
                        ${l===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}
                    `,children:"上一步"}),l<f.length-1?e.jsx("button",{onClick:v,className:"px-8 py-3 bg-black text-white font-bold rounded-lg hover:bg-gray-800 transition-all shadow-md hover:shadow-lg flex-1 sm:flex-none",children:"下一步"}):e.jsx("button",{onClick:j,className:"px-8 py-3 bg-black text-white font-bold rounded-lg hover:bg-gray-800 transition-all shadow-md hover:shadow-lg flex-1 sm:flex-none",children:"生成我的灵魂哈希"})]})]})}export{E as Q};
